(this["webpackJsonpCountdown-Planner-client"]=this["webpackJsonpCountdown-Planner-client"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(25),s=a.n(r),c=(a(74),a(50)),i=a(5),l=a(7),o=a(106),u=(a(75),a(54)),d=a(1);var j=function(e){var t=e.variant,a=e.heading,r=e.message,s=Object(n.useState)(!0),c=Object(i.a)(s,2),l=c[0],o=c[1],j=Object(n.useState)(null),b=Object(i.a)(j,2),h=b[0],p=b[1];return console.log(h),Object(n.useEffect)((function(){var e=setTimeout((function(){return o(!1)}),5e3);return p(e),function(){clearTimeout(h)}}),[]),Object(d.jsx)(u.a,{variant:t,onClose:function(){return o(!1)},dismissible:!0,show:l,children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(u.a.Heading,{children:a}),Object(d.jsx)("p",{className:"alert-body",children:r})]})})},b=a(68),h=a(40),p=a(67),m=a(11),O=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m.c,{to:"/plans",className:"nav-link",children:"Plans"}),Object(d.jsx)(m.c,{to:"/plans/create",className:"nav-link",children:"Create A Plan"}),Object(d.jsx)(m.c,{to:"/change-password",className:"nav-link",children:"Change Password"}),Object(d.jsx)(m.c,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]}),x=Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(m.c,{to:"/sign-up",className:"nav-link",children:"Sign Up"}),Object(d.jsx)(m.c,{to:"/sign-in",className:"nav-link",children:"Sign In"})]}),v=Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(m.c,{to:"/",className:"nav-link",children:"Home"})}),g=function(e){var t=e.user;return Object(d.jsx)(h.a,{bg:"primary",variant:"dark",expand:"md",children:Object(d.jsxs)(p.a,{children:[Object(d.jsx)(h.a.Brand,{children:Object(d.jsx)(m.b,{to:"/",style:{color:"#FFF",textDecoration:"none"},children:"CountdownPlaner"})}),Object(d.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(b.a,{className:"ms-auto",children:[t&&Object(d.jsxs)("span",{className:"navbar-text me-2",children:["Welcome, ",t.email]}),v,t?O:x]})})]})})},f=a(14),w=a(9),S=a.n(w),k="https://agile-beach-06972.herokuapp.com",y="http://localhost:4741",C="localhost"===window.location.hostname?y:k,P=a(23),N=a.n(P),A=function(e,t,a){return N.a.post(C+"/sign-up/",{credentials:{email:e,password:t,password_confirmation:a}})},D=function(e,t){return N.a.post(C+"/sign-in/",{credentials:{email:e,password:t}})},F=function(e){return N.a.delete(C+"/sign-out/",{headers:{Authorization:"Bearer ".concat(e.token)}})},I=function(e,t,a){return N.a.patch(C+"/change-password/",{passwords:{old:e,new:t}},{headers:{Authorization:"Bearer ".concat(a.token)}})},L=a(10),E=a(33),U=function(e){var t=e.msgAlert,a=e.setUser,r=Object(n.useState)(""),s=Object(i.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(n.useState)(""),m=Object(i.a)(p,2),O=m[0],x=m[1],v=Object(n.useState)(!1),g=Object(i.a)(v,2),w=g[0],k=g[1],y=function(){var e=Object(f.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,A(c,b,O);case 4:return e.next=6,D(c,b);case 6:r=e.sent,a(r.data.user),t({heading:"Sign Up Success",message:"Succesfully registered! You've been signed in as well.",variant:"success"}),k(!0),e.next=18;break;case 12:e.prev=12,e.t0=e.catch(1),o(""),h(""),x(""),t({heading:"Sign Up Failed with error: "+e.t0.message,message:"Registration failed. Email may be taken, or passwords don't match.",variant:"danger"});case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return w?Object(d.jsx)(l.a,{to:"/"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Sign Up"}),Object(d.jsxs)(L.a,{onSubmit:y,children:[Object(d.jsxs)(L.a.Group,{controlId:"email",children:[Object(d.jsx)(L.a.Label,{children:"Email address"}),Object(d.jsx)(L.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:function(e){return o(e.target.value)}})]}),Object(d.jsxs)(L.a.Group,{controlId:"password",children:[Object(d.jsx)(L.a.Label,{children:"Password"}),Object(d.jsx)(L.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(d.jsxs)(L.a.Group,{controlId:"passwordConfirmation",children:[Object(d.jsx)(L.a.Label,{children:"Password Confirmation"}),Object(d.jsx)(L.a.Control,{required:!0,name:"passwordConfirmation",value:O,type:"password",placeholder:"Confirm Password",onChange:function(e){return x(e.target.value)}})]}),Object(d.jsx)(E.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},G=function(e){var t=e.msgAlert,a=e.setUser,r=Object(n.useState)(""),s=Object(i.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(n.useState)(!1),m=Object(i.a)(p,2),O=m[0],x=m[1],v=function(){var e=Object(f.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,D(c,b);case 4:r=e.sent,a(r.data.user),t({heading:"Sign In Success",message:"Welcome!",variant:"success"}),x(!0),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),o(""),h(""),t({heading:"Sign In Failed with error: "+e.t0.message,message:"Failed to sign in. Check your email and password and try again.",variant:"danger"});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return O?Object(d.jsx)(l.a,{to:"/"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Sign In"}),Object(d.jsxs)(L.a,{onSubmit:v,children:[Object(d.jsxs)(L.a.Group,{controlId:"email",children:[Object(d.jsx)(L.a.Label,{children:"Email address"}),Object(d.jsx)(L.a.Control,{required:!0,type:"email",name:"email",value:c,placeholder:"Enter email",onChange:function(e){return o(e.target.value)}})]}),Object(d.jsxs)(L.a.Group,{controlId:"password",children:[Object(d.jsx)(L.a.Label,{children:"Password"}),Object(d.jsx)(L.a.Control,{required:!0,name:"password",value:b,type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(d.jsx)(E.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},B=function(e){var t=e.msgAlert,a=e.clearUser,r=e.user,s=Object(n.useState)(!1),c=Object(i.a)(s,2),o=c[0],u=c[1];return Object(n.useEffect)(Object(f.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(r);case 2:t({heading:"Signed Out Successfully",message:"Come back soon!",variant:"success"}),u(!0),a();case 5:case"end":return e.stop()}}),e)}))),[]),!r||o?Object(d.jsx)(l.a,{to:"/"}):""},T=function(e){var t=e.msgAlert,a=e.user,r=Object(n.useState)(""),s=Object(i.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(n.useState)(!1),m=Object(i.a)(p,2),O=m[0],x=m[1],v=function(){var e=Object(f.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,I(c,b,a);case 4:t({heading:"Change Password Success",message:"Password changed successfully!",variant:"success"}),x(!0),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),o(""),h(""),t({heading:"Change Password Failed with error: "+e.t0.message,message:"Failed to change passwords. Check your old password and try again.",variant:"danger"});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return!a||O?Object(d.jsx)(l.a,{to:"/"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Change Password"}),Object(d.jsxs)(L.a,{onSubmit:v,children:[Object(d.jsxs)(L.a.Group,{controlId:"oldPassword",children:[Object(d.jsx)(L.a.Label,{children:"Old password"}),Object(d.jsx)(L.a.Control,{required:!0,name:"oldPassword",value:c,type:"password",placeholder:"Old Password",onChange:function(e){return o(e.target.value)}})]}),Object(d.jsxs)(L.a.Group,{controlId:"newPassword",children:[Object(d.jsx)(L.a.Label,{children:"New Password"}),Object(d.jsx)(L.a.Control,{required:!0,name:"newPassword",value:b,type:"password",placeholder:"New Password",onChange:function(e){return h(e.target.value)}})]}),Object(d.jsx)(E.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})]})})},q=function(){return Object(d.jsx)("h1",{children:"Countdown Planner"})},z=a(105),_=function(e){return N.a.get(C+"/plans",{headers:{Authorization:"Bearer ".concat(e.token)}})},W=function(e,t){return N.a.get("".concat(C,"/plans/").concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}})},H=function(e,t){return N.a.delete("".concat(C,"/Plans/").concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}})},J=function(e,t,a,n,r){return N.a.patch("".concat(C,"/plans/").concat(e),{plan:{title:t,description:a,date:n}},{headers:{Authorization:"Bearer ".concat(r.token)}})},R=function(e,t,a,n){return N.a.post("".concat(C,"/plans"),{plan:{title:e,description:t,date:a}},{headers:{Authorization:"Bearer ".concat(n.token)}})},Y=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)(null),s=Object(i.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)(!1),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(l.h)().id;if(!t)return Object(d.jsx)(l.a,{to:"/"});Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(p,t);case 3:n=e.sent,o(n.data.plan),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({heading:"Plan failed to load",message:e.t0.message,variant:"danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var O=function(){var e=Object(f.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H(p,t);case 3:h(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a({heading:"Failed to delete plan",message:e.t0.message,variant:"danger"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return c?b?Object(d.jsx)(l.a,{to:"/plans"}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:c.title}),Object(d.jsxs)("p",{children:["Title: ",c.title]}),Object(d.jsx)(E.a,{variant:"danger",onClick:O,children:"Delete Plan"}),Object(d.jsx)(m.b,{to:"/plans/".concat(p,"/edit"),children:Object(d.jsx)(E.a,{variant:"primary",type:"submit",children:"Update Plan"})})]})}):Object(d.jsx)(z.a,{animation:"border",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},K=function(e){var t=e.handleSubmit,a=e.title,n=e.description,r=e.date,s=e.setTitle,c=e.setDescription,i=e.setDate;return Object(d.jsxs)(L.a,{onSubmit:t,children:[Object(d.jsxs)(L.a.Group,{controlId:"title",children:[Object(d.jsx)(L.a.Label,{children:"Title"}),Object(d.jsx)(L.a.Control,{placeholder:"Plan an event",name:"title",value:a,onChange:function(e){return s(e.target.value)}})]}),Object(d.jsxs)(L.a.Group,{controlId:"description",children:[Object(d.jsx)(L.a.Label,{children:"Description"}),Object(d.jsx)(L.a.Control,{placeholder:"What exactly do you want to plan?",name:"description",value:n,onChange:function(e){return c(e.target.value)}}),Object(d.jsxs)(L.a.Group,{controlId:"date",children:[Object(d.jsx)(L.a.Label,{children:"Date"}),Object(d.jsx)(L.a.Control,{placeholder:"Pick a Date",type:"date",name:"date",value:r,onChange:function(e){return i(e.target.value)}})]})]}),Object(d.jsx)(E.a,{className:"mt-2",variant:"primary",type:"submit",children:"Submit"})]})},M=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)(""),s=Object(i.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(n.useState)(""),m=Object(i.a)(p,2),O=m[0],x=m[1],v=Object(n.useState)(null),g=Object(i.a)(v,2),w=g[0],k=g[1],y=function(){var e=Object(f.a)(S.a.mark((function e(n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,R(c,b,new Date(O),t);case 4:r=e.sent,k(r.data.plan._id),a({heading:"Plan Created",message:"Created ".concat(c," successfully."),variant:"success"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a({heading:"Failed to create plan",message:e.t0.message,variant:"danger"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return t?w?Object(d.jsx)(l.a,{to:"/plans/".concat(w)}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Create Plan"}),Object(d.jsx)(K,{handleSubmit:y,title:c,description:b,date:O,setTitle:o,setDescription:h,setDate:x})]})}):Object(d.jsx)(l.a,{to:"/"})},Q=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)(""),s=Object(i.a)(r,2),c=s[0],o=s[1],u=Object(n.useState)(""),j=Object(i.a)(u,2),b=j[0],h=j[1],p=Object(n.useState)(""),m=Object(i.a)(p,2),O=m[0],x=m[1],v=Object(n.useState)(!1),g=Object(i.a)(v,2),w=g[0],k=g[1],y=Object(l.h)().id;if(!t)return Object(d.jsx)(l.a,{to:"/"});Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(y,t);case 3:n=e.sent,o(n.data.task.title),h(n.data.task.description),x(n.data.task.date),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({heading:"Failed to load plan",message:e.t0.message,variant:"danger"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var C=function(){var e=Object(f.a)(S.a.mark((function e(n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,J(y,c,b,O,t);case 4:k(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a({heading:"Failed to update plan",message:e.t0.message,variant:"danger"});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return w?Object(d.jsx)(l.a,{to:"/plans/".concat(y)}):Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Edit Plan"}),Object(d.jsx)(K,{handleSubmit:C,title:c,description:b,date:O,setTitle:o,setDescription:h,setDate:x})]})})},V=function(e){var t=e.user,a=e.msgAlert,r=Object(n.useState)(null),s=Object(i.a)(r,2),c=s[0],o=s[1];if(!t)return Object(d.jsx)(l.a,{to:"/"});if(Object(n.useEffect)((function(){var e=function(){var e=Object(f.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t);case 3:n=e.sent,o(n.data.plans),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({heading:"Plans List failed to load",message:e.t0.message,variant:"danger"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),c){if(0===c.length)return Object(d.jsx)("h1",{children:"No plans yet, go make some!"});var u=c.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(m.b,{to:"/plans/".concat(e._id),children:e.title})},e._id)}));return Object(d.jsx)("div",{className:"row",children:Object(d.jsxs)("div",{className:"col-sm-10 col-md-8 mx-auto mt-5",children:[Object(d.jsx)("h3",{children:"Plans"}),Object(d.jsx)("ul",{children:u})]})})}return Object(d.jsx)(z.a,{animation:"border",role:"status",children:Object(d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},X=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),u=Object(i.a)(s,2),b=u[0],h=u[1],p=function(e){var t=e.heading,a=e.message,n=e.variant,r=Object(o.a)();h((function(e){return[].concat(Object(c.a)(e),[{heading:t,message:a,variant:n,id:r}])}))},m=function(e){h((function(t){return t.filter((function(t){return t.id!==e}))}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(g,{user:a}),b.map((function(e){return Object(d.jsx)(j,{heading:e.heading,variant:e.variant,message:e.message,id:e.id,deleteAlert:m},e.id)})),Object(d.jsx)("main",{className:"container",children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:"/sign-up",element:Object(d.jsx)(U,{msgAlert:p,setUser:r})}),Object(d.jsx)(l.b,{path:"/sign-in",element:Object(d.jsx)(G,{msgAlert:p,setUser:r})}),Object(d.jsx)(l.b,{path:"/sign-out",element:Object(d.jsx)(B,{msgAlert:p,clearUser:function(){return r(null)},user:a})}),Object(d.jsx)(l.b,{path:"/change-password",element:Object(d.jsx)(T,{msgAlert:p,user:a})}),Object(d.jsx)(l.b,{path:"/",element:Object(d.jsx)(q,{})}),Object(d.jsx)(l.b,{path:"/plans",element:Object(d.jsx)(V,{msgAlert:p,user:a})}),Object(d.jsx)(l.b,{path:"/plans/:id",element:Object(d.jsx)(Y,{msgAlert:p,user:a})}),Object(d.jsx)(l.b,{path:"/plans/create",element:Object(d.jsx)(M,{msgAlert:p,user:a})}),Object(d.jsx)(l.b,{path:"/plans/:id/edit",element:Object(d.jsx)(Q,{msgAlert:p,user:a})})]})})]})},Z=Object(d.jsx)(m.a,{basename:"/Countdown-Planner-client",children:Object(d.jsx)(X,{})});s.a.render(Z,document.getElementById("root"))},74:function(e,t,a){},75:function(e,t,a){}},[[102,1,2]]]);
//# sourceMappingURL=main.6bdb268d.chunk.js.map